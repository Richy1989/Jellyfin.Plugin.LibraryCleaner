<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Library Cleaner Config</title>
</head>
<body>
    <div id="CleanerPluginConfigPage" data-role="page" class="page type-interior pluginConfigurationPage" data-require="emby-input,emby-button,emby-select,emby-checkbox">
        <div data-role="content">
            <div class="content-primary">
                <form id="CleanerConfigForm">
                    <div class="selectContainer">
                        <label class="selectLabel" for="Options">Several Options</label>
                        <select is="emby-select" id="Options" name="Options" class="emby-select-withcolor emby-select">
                            <option id="optOneOption" value="OneOption">One Option</option>
                            <option id="optAnotherOption" value="AnotherOption">Another Option</option>
                        </select>
                    </div>
                    <div class="inputContainer">
                        <label class="inputLabel inputLabelUnfocused" for="AnInteger">An Integer</label>
                        <input id="AnInteger" name="AnInteger" type="number" is="emby-input" min="0" />
                        <div class="fieldDescription">A Description</div>
                    </div>
                    <div class="checkboxContainer checkboxContainer-withDescription">
                        <label class="emby-checkbox-label">
                            <input id="TrueFalseSetting" name="TrueFalseCheckBox" type="checkbox" is="emby-checkbox" />
                            <span>A Checkbox</span>
                        </label>
                    </div>
                    <div class="inputContainer">
                        <label class="inputeLabel inputLabelUnfocused" for="AString">A String</label>
                        <input id="AString" name="AString" type="text" is="emby-input" />
                        <div class="fieldDescription">Another Description</div>
                    </div>
                    <div>
                        <button is="emby-button" type="submit" class="raised button-submit block emby-button">
                            <span>Scan Cleaning Items</span>
                        </button>
                    </div>
                    <div class="cleanerList"></div>
                </form>
            </div>
        </div>
        <script type="text/javascript">
            var CleanerPluginConfig =
            {
                pluginUniqueId: '04A8270D-D30B-4C36-8D52-A510C433C1C2',

                populateCleanerList: function (page)
                {
                    var cleanList = CleanerPluginConfig.config.CleanList;
                    var html = "";

                    for (var i = 0; i < cleanList.length; i++)
                    {
                        var stream = cleanList[i];

                        html += '<div class="listItem">';

                        html += '<div class="checkboxContainer checkboxContainer-withDescription">';
                        html += '<label class="emby-checkbox-label">';
                        html += '<input id="TrueFalseSetting' + i + '" name="TrueFalseCheckBox" type="checkbox" is="emby-checkbox" />';
                        html += '<span>';
                        html += stream.Name;
                        html += '</span>';
                        html += '</label>';
                        html += '</div>';

                        //////// html += '<i class="listItemIcon md-icon">live_tv</i>';
                        //////html += '<div class="listItemBody two-line">';
                        //////html += '<h3 class="listItemBodyText">';
                        //////html += stream.Name;
                        //////html += '</h3>';
                        //////html += '</div>';
                        //html += '<button type="button" is="paper-icon-button-light" onclick="IPTVConfigurationPage.deleteStream(this, ' + i + ');"title="Delete"><i class="md-icon">delete</i></button>';
                        html += '</div>';
                    }

                    var streamList = page.querySelector('.cleanerList');
                    streamList.innerHTML = html;

                    ////if (streams.length)
                    ////{
                    ////    streamList.classList.remove('hide');
                    ////}
                    ////else
                    ////{
                    ////    streamList.classList.add('hide');
                    ////}
                }
            };

            //Page loading setup variables
            document.querySelector('#CleanerPluginConfigPage')
                .addEventListener('pageshow', function ()
                {
                    Dashboard.showLoadingMsg();

                    var page = this;

                    ApiClient.getPluginConfiguration(CleanerPluginConfig.pluginUniqueId).then(function (config)
                    {
                        CleanerPluginConfig.config = config;
                        CleanerPluginConfig.populateCleanerList(page);

                        Dashboard.hideLoadingMsg();
                    });    
                });



            document.querySelector('#CleanerConfigForm')
                .addEventListener('submit', function () {
                    Dashboard.showLoadingMsg();

                    ApiClient.getPluginConfiguration(TemplateConfig.pluginUniqueId).then(function (config) {
                        config.Options = document.querySelector('#Options').value;
                        config.AnInteger = document.querySelector('#AnInteger').value;
                        config.TrueFalseSetting = document.querySelector('#TrueFalseSetting').checked;
                        config.AString = document.querySelector('#AString').value;
                        ApiClient.updatePluginConfiguration(TemplateConfig.pluginUniqueId, config).then(function (result) {
                            Dashboard.processPluginConfigurationUpdateResult(result);
                        });
                    });
                    return false;
                });






            document.querySelector('#CleanerConfigForm')
                .addEventListener('submit', function () {
                    Dashboard.showLoadingMsg();

                    ApiClient.getPluginConfiguration(TemplateConfig.pluginUniqueId).then(function (config)
                    {
                        config.Options = document.querySelector('#Options').value;
                        config.AnInteger = document.querySelector('#AnInteger').value;
                        config.TrueFalseSetting = document.querySelector('#TrueFalseSetting').checked;
                        config.AString = document.querySelector('#AString').value;
                        ApiClient.updatePluginConfiguration(TemplateConfig.pluginUniqueId, config).then(function (result)
                        {
                            Dashboard.processPluginConfigurationUpdateResult(result);
                        });
                    });
                    return false;
                });

        </script>
    </div>
</body>
</html>
